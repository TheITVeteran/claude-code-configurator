name: legacy-lint

# This workflow is now DEPRECATED and replaced by the optimized CI pipeline
# All linting, formatting, and code quality checks are now in ci.yml
# This file is kept for reference but should not be used

on:
  # Disabled - all triggers moved to ci.yml
  workflow_dispatch:
    inputs:
      force_run:
        description: 'Force run legacy lint (not recommended)'
        required: false
        default: 'false'

concurrency:
  group: ${{ github.workflow }}-${{ github.event_name }}-${{ github.ref }}
  cancel-in-progress: true

permissions:
  contents: read
  security-events: write
  pull-requests: read

defaults:
  run:
    shell: bash
    working-directory: caci

jobs:
  deprecation-notice:
    name: DEPRECATED - Use CI Pipeline Instead
    runs-on: ubuntu-latest
    if: github.event.inputs.force_run != 'true'

    steps:
      - name: Deprecation Notice
        run: |
          echo "## ⚠️ Legacy Lint Workflow Deprecated" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "This workflow has been **deprecated** and replaced by the optimized CI pipeline." >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### ✅ What to use instead:" >> $GITHUB_STEP_SUMMARY
          echo "- **Main CI Pipeline**: `.github/workflows/ci.yml`" >> $GITHUB_STEP_SUMMARY
          echo "- **Fast feedback**: Quality gates run first (lint, format, types)" >> $GITHUB_STEP_SUMMARY
          echo "- **Intelligent dependencies**: Expensive tests only run if basics pass" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### 🚀 Benefits of new structure:" >> $GITHUB_STEP_SUMMARY
          echo "- ⚡ **Faster feedback** - lint failures stop pipeline in ~30s" >> $GITHUB_STEP_SUMMARY
          echo "- 💰 **Cost efficient** - no wasted resources on bad code" >> $GITHUB_STEP_SUMMARY
          echo "- 🎯 **Logical flow** - format → lint → type → test → build → deploy" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "Please use the main CI pipeline for all quality checks." >> $GITHUB_STEP_SUMMARY

          # Fail the job to make it clear this shouldn't be used
          exit 1
